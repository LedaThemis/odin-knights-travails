Note: this has two implementations, one that initializes a graph and one that does not.
